webpackJsonp([1],{"0H5r":function(t,e){},D5sY:function(t,e){},Jmt5:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),n=s("NYxO"),r=s("Xxa5"),o=s.n(r),i=s("exGp"),c=s.n(i),l={name:"NavBar",data:function(){return{msg:"OTA Server Admin Content"}},methods:{logout:function(){var t=this;return c()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("logout");case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0.message);case 8:case"end":return e.stop()}},e,t,[[0,5]])}))()}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"navbar navbar-toggleable-md navbar-inverse bg-inverse fixed-top"},[t._m(0,!1,!1),t._v(" "),s("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[t._v("OTA Admin")]),t._v(" "),s("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarsExampleDefault"}},[s("ul",{staticClass:"navbar-nav mr-auto"},[s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[t._v("Home")])],1),t._v(" "),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/secretsMng"}},[t._v("Secrets Manage")])],1),t._v(" "),this.$store.state.authUser?t._e():s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/login"}},[t._v("Login")])],1),t._v(" "),this.$store.state.authUser?s("li",{staticClass:"nav-item"},[s("div",{staticClass:"logout",on:{click:t.logout}},[t._v("Logout")])]):t._e()])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"navbar-toggler navbar-toggler-right",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarsExampleDefault","aria-controls":"navbarsExampleDefault","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])}]},d=s("VU/8")(l,u,!1,function(t){s("hyKu")},null,null).exports,m={render:function(){this.$createElement;this._self._c;return this._m(0,!1,!1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("footer",[e("span",[this._v("© CoolbitX")])])}]},v=s("VU/8")({name:"Footer"},m,!1,function(t){s("e2zj")},null,null).exports,f=s("mtWM"),p=s.n(f),h=s("7t+N"),_=s.n(h);window.$=window.jQuery=_.a;var g={name:"Modal",methods:{doSave:function(){var t=this;return c()(o.a.mark(function e(){var s,a,n,r,i,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=window.$("form.upsertContent input[name='userId']").val(),a=window.$("form.upsertContent input[name='keyNum']").val(),n=window.$("form.upsertContent input[name='secret']").val(),r=t.$store.state.token,e.next=6,p.a.post("http://localhost:7000/api/modifySecret",{userId:s,keyNum:a,secret:n,token:r});case 6:return i=e.sent,c=i.data,console.log(c.data[0]),e.next=11,t.$store.dispatch("setToken",c.data[0]);case 11:return e.next=13,t.$store.dispatch("fetchSecrets");case 13:window.$("#myModal").modal("hide");case 14:case"end":return e.stop()}},e,t)}))()}}},w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal modal-static fade",attrs:{id:"myModal","data-backdrop":"static","data-keyboard":"false"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[t._m(0,!1,!1),t._v(" "),t._m(1,!1,!1),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-primary",on:{click:t.doSave}},[t._v("Save")]),t._v(" "),s("button",{staticClass:"btn btn-secondary",attrs:{"data-dismiss":"modal"}},[t._v("Close")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title"}),this._v(" "),e("button",{staticClass:"close",attrs:{"data-dismiss":"modal"}},[this._v("×")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-body"},[e("form",{staticClass:"upsertContent"},[e("input",{attrs:{type:"hidden",name:"userId"}}),this._v(" "),e("input",{attrs:{type:"hidden",name:"keyNum"}}),this._v(" "),e("label",{attrs:{for:"secret"}},[this._v("Secret:")]),e("input",{staticClass:"form-control",attrs:{type:"text",name:"secret",placeholder:"secret"}})])])}]},b={name:"app",components:{navbar:d,myfooter:v,modal:s("VU/8")(g,w,!1,null,null,null).exports},beforeCreate:function(){console.log(this.$store)},created:function(){this.$store.dispatch("fetchSessions")},mounted:function(){this.$store.dispatch("fetchSessions")}},C={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("navbar"),this._v(" "),e("router-view"),this._v(" "),e("myfooter"),this._v(" "),e("modal")],1)},staticRenderFns:[]},S=s("VU/8")(b,C,!1,null,null,null).exports,k=s("/ocq"),x={render:function(){this.$createElement;this._self._c;return this._m(0,!1,!1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("div",{staticClass:"starter-template"},[e("h1",[this._v("OTA Management Portal")]),this._v(" "),e("p",{staticClass:"lead"})])])}]},E=s("VU/8")({name:"Home"},x,!1,function(t){s("0H5r")},null,null).exports;window.$=window.jQuery=_.a;var $={name:"Cards",props:{secretsList:{}},methods:{openModal:function(t){console.log(t),window.$("#myModal .modal-title").text("Modify Secret"),this.setupModal(t),window.$("#myModal").modal("show")},setupModal:function(t){var e="card"+t,s=window.$("#"+e+" .card-title[name='userId']").text(),a=window.$("#"+e+" .card-title[name='keyNum']").text(),n=window.$("#"+e+" .card-title[name='secret']").text();window.$(".upsertContent input[name='userId']").val(s),window.$(".upsertContent input[name='keyNum']").val(a),window.$(".upsertContent input[name='secret']").val(n)}}},y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card card-inverse"},t._l(t.secretsList,function(e,a){return s("div",{key:a,staticClass:"card-block",staticStyle:{"background-color":"rgb(51, 51, 51)","border-color":"rgb(51, 51, 51)"},attrs:{id:"card"+a,secretsList:t.secretsList}},[s("div",{staticClass:"inLine"},[s("label",{attrs:{for:"userId"}},[t._v("userId:")]),s("div",{staticClass:"card-title",attrs:{name:"userId"}},[t._v(t._s(e.userId))])]),t._v(" "),s("div",{staticClass:"inLine"},[s("label",{attrs:{for:"keyNum"}},[t._v("keyNum:")]),s("div",{staticClass:"card-title",attrs:{name:"keyNum"}},[t._v(t._s(e.keyNum))])]),t._v(" "),s("div",{staticClass:"inLine"},[s("label",{attrs:{for:"secret"}},[t._v("secret:")]),s("div",{staticClass:"card-title",attrs:{name:"secret"}},[t._v(t._s(e.secret))])]),t._v(" "),s("div",{staticClass:"inLine"},[s("label",{attrs:{for:"time"}},[t._v("time:")]),s("div",{staticClass:"card-title",attrs:{name:"time"}},[t._v(t._s(new Date(e.modifiedDate).toLocaleString()))])]),t._v(" "),s("button",{staticClass:"btn btn-primary",on:{click:function(e){t.openModal(a)}}},[t._v("Modify Secrets")])])}))},staticRenderFns:[]},T={name:"SecretsManage",components:{cards:s("VU/8")($,y,!1,function(t){s("rN8n")},null,null).exports},methods:{getSecrets:function(){var t=this;return c()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("fetchSecrets");case 2:case"end":return e.stop()}},e,t)}))()}},created:function(){this.$store.dispatch("fetchSecrets")},mounted:function(){this.$store.dispatch("fetchSecrets")},asyncData:function(){var t=this.$store.state.token;console.log(t);return{secretsList:p.a.get("http://localhost:7000/api/getSecrets",{headers:{"x-access-token":t}})}},computed:{secretsList:function(){return this.$store.state.secretsList}}},U={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("h2",[this._v("Secret Management")]),this._v(" "),e("cards",{attrs:{secretsList:this.secretsList}})],1)},staticRenderFns:[]},L=s("VU/8")(T,U,!1,function(t){s("clc9")},null,null).exports,N={name:"Login",computed:{isLogin:function(){return this.$store.state.authUser}},data:function(){return{formError:null,formUsername:null,formPasswd:null}},methods:{login:function(){var t=this;return c()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.formUsername,t.formPasswd),e.prev=1,e.next=4,t.$store.dispatch("login",{username:t.formUsername,passwd:t.formPasswd});case 4:t.formUsername=null,t.formPasswd=null,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),t.formError=e.t0.message;case 12:case"end":return e.stop()}},e,t,[[1,8]])}))()}}},M={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[this.isLogin?t._e():s("form",{staticClass:"form-signin",on:{submit:function(e){e.preventDefault(),t.login(e)}}},[t.formError?s("p",{staticClass:"error"},[t._v(t._s(t.formError))]):t._e(),t._v(" "),s("h2",{staticClass:"form-signin-heading"},[t._v("Please sign in")]),t._v(" "),s("label",{staticClass:"sr-only",attrs:{for:"username"}},[t._v("Username")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.formUsername,expression:"formUsername"}],staticClass:"form-control",attrs:{type:"text",name:"username",placeholder:"User name",required:"",autofocus:""},domProps:{value:t.formUsername},on:{input:function(e){e.target.composing||(t.formUsername=e.target.value)}}}),t._v(" "),s("label",{staticClass:"sr-only",attrs:{for:"passwd"}},[t._v("Password")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.formPasswd,expression:"formPasswd"}],staticClass:"form-control",attrs:{type:"password",name:"passwd",placeholder:"Password",required:""},domProps:{value:t.formPasswd},on:{input:function(e){e.target.composing||(t.formPasswd=e.target.value)}}}),t._v(" "),t._m(0,!1,!1),t._v(" "),s("button",{staticClass:"btn btn-lg btn-primary btn-block"},[t._v("Sign in")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"checkbox"},[e("label",[e("input",{attrs:{type:"checkbox",value:"remember-me"}}),this._v(" Remember me\n      ")])])}]},P=s("VU/8")(N,M,!1,function(t){s("D5sY")},null,null).exports;a.a.use(k.a);var R=new k.a({routes:[{path:"/",name:"Home",component:E},{path:"/secretsMng",name:"SecretsManage",component:L},{path:"/login",name:"Login",component:P}],mode:"history"}),I=(s("K3J8"),s("Jmt5"),s("18Sv")),O=s.n(I);a.a.use(n.a),a.a.use(O.a);var A=function(){return new n.a.Store({actions:{login:function(t,e){var s=this,a=t.commit,n=e.username,r=e.passwd;return c()(o.a.mark(function t(){var e,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(n,r),t.prev=1,t.next=4,p.a.post("/api/user",{username:n,passwd:r,number:2}).then(function(t){return console.log(s.$session),t});case 4:e=t.sent,i=e.data,a("SET_USER",i),a("SET_TOKEN",i),t.next=18;break;case 10:if(t.prev=10,t.t0=t.catch(1),!t.t0.response||401!==t.t0.response.status){t.next=14;break}throw new Error("Bad credentiasl");case 14:if(!t.t0.response||403!==t.t0.response.status){t.next=16;break}throw new Error("Need to Activated");case 16:throw console.log(t.t0.message),t.t0;case 18:case"end":return t.stop()}},t,s,[[1,10]])}))()},logout:function(t){var e=this,s=t.commit;return c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.post("/api/logout");case 2:s("SET_USER",null);case 3:case"end":return t.stop()}},t,e)}))()},fetchSecrets:function(t){var e=this,s=t.commit;return c()(o.a.mark(function t(){var a,n,r,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.state.token),a=e.state.token,t.next=4,p.a.get("/api/getAllSecrets",{headers:{"x-access-token":a}});case 4:n=t.sent,r=n.data,console.log(r.data),i=r.data,s("SET_SECRETS_LIST",i);case 9:case"end":return t.stop()}},t,e)}))()},setToken:function(t,e){var s=this,a=t.commit;return c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a("SET_TOKEN",e);case 1:case"end":return t.stop()}},t,s)}))()},fetchSessions:function(t,e){var s=this,a=t.commit;return c()(o.a.mark(function t(){var e,n,r,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.post("/api/sessionsStatus");case 2:e=t.sent,n=e.data,r=n.session,console.log(r),a("SET_SESSION",r),r&&(i=r.token,console.log(i),a("SET_TOKEN",r));case 8:case"end":return t.stop()}},t,s)}))()}},state:{authUser:null,token:null,registerStatus:null,isProcessing:!1,isDialogShow:!1,dialogMsg:null,session:null,secretsList:null},mutations:{SET_USER:function(t,e){t.authUser=e},SET_TOKEN:function(t,e){var s=e.token;t.token=s},SET_REGISTER_STATUS:function(t,e){t.registerStatus=e},SET_SESSION:function(t,e){t.session=e},SET_SECRETS_LIST:function(t,e){t.secretsList=e}},getters:{getSecrets:function(t){return t.secretsList}}})}(),D={store:A,install:function(t,e){t.prototype.$store=A}},F=s("KGmM"),K=s.n(F);a.a.config.productionTip=!1,a.a.use(n.a),a.a.use(D),a.a.use(K.a),new a.a({el:"#app",router:R,template:"<App/>",components:{App:S}})},clc9:function(t,e){},e2zj:function(t,e){},hyKu:function(t,e){},rN8n:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.0b6c9eb2dfd9aaba15c2.js.map